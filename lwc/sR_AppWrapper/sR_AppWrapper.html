<template>

    <template if:true={showSpinner}>
        <lightning-spinner></lightning-spinner>
    </template>

    <lightning-card>
        <template if:false={selectedChar}>
            <div onclick={handleClick}>
                <lightning-button data-name="NewChar" label={labels.buttons.newChar}></lightning-button><br />
                <template for:each={characterNames} for:item="characterName">
                    <div key={characterName.Id}>
                        <a data-character_id={characterName.Id} data-name="existingChar">{characterName.Name}</a>
                    </div>    
                </template>
            </div>
        </template>
    
        <template if:true={selectedChar}>
            <div onclick={handleClick} onchange={handleChange} class="slds-clearfix">
                <lightning-button data-name="ClearChar" label={labels.buttons.cancelAll}></lightning-button>
                <!-- <lightning-button data-name="SaveChar" label={labels.buttons.save} disabled={saveDisabled}></lightning-button> -->
                <button class="slds-button slds-button_neutral" data-name="SaveChar" disabled={saveDisabled}>{labels.buttons.save}</button>
                <lightning-input  data-name="Name" value={selectedChar.Name}></lightning-input>
                <lightning-button data-name="RandomName" label={labels.buttons.random}></lightning-button>
                <lightning-input  data-name="Real_Name__c" value={selectedChar.Real_Name__c}></lightning-input>
                <lightning-input  data-name="Short_Notes__c" value={selectedChar.Short_Notes__c}></lightning-input>

            </div>

            <div class="slds-p-horizontal_large">
                <lightning-tabset >
                    <lightning-tab label={labels.tabs.basic}>
                        <c-sr_basic-info basic-info={basicInfo}></c-sr_basic-info>
                    </lightning-tab>
                    <lightning-tab label={labels.tabs.metaraceAtts}>
                        <c-sr_metarace-and-atts
                        metarace-collection-container={collectionContainers.metarace.metaraces}
                        selected-char = {selectedChar}
                        att-max-values={attMaxValues}
                        adju-effects={adjuEffects}
                        onupdateevent={handleUpdateEvent}
                        ></c-sr_metarace-and-atts>

                    </lightning-tab>
                    <lightning-tab label={labels.tabs.skills}>
                        <c-sr_skills
                        skill-template-collection-container={collectionContainers.skills.skillTemplates}
                        selected-skills={SkillAssigns__r}
                        onupdateevent={handleUpdateEvent}
                        ></c-sr_skills>
                    </lightning-tab>

                    <lightning-tab label={labels.tabs.magic}>
                        <c-sr_magic
                        magic-collection-containers={collectionContainers.magic}
                        selected-char={selectedChar}
                        spell-assigns={Spell_Assigns__r}
                        onmagic_event={handleChildEvent}
                        onupdateevent={handleUpdateEvent}

                        >


                        </c-sr_magic>
                        <!-- <c-sr_magic
                        magician-type-map={templates.magicianTypeMap}
                        selected-char={selectedChar}
                        totem-map={templates.totemMap}
                        spell-template-map={templates.spellTemplateMap}
                        selected-spell-assigns={Spell_Assigns__r}
                        onmagic_event={handleChildEvent}
                        ></c-sr_magic> -->
                    </lightning-tab>
                </lightning-tabset>
            </div>
        </template>
        
    </lightning-card>

</template>